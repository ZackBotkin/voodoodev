<html>
<head>
  <title>Courses</title>
  <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">

  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
  <script src="/javascripts/AngularApp.js"></script>
  <style> .glyphicon-thumbs-up { cursor:pointer } </style>
</head>
<body ng-app="courseInput" ng-controller="MainCtrl">
  <div class="row">
    <div class="col-md-6 col-md-offset-3">
	<ui-view></ui-view>
    </div>
  </div>
<script type= "text/ng-template" id = "/home.html">
      <div class="page-header">
        <h1>Courses</h1>
      </div>

      <div ng-repeat="course in courses | orderBy:'-upvotes'">
        <span class="glyphicon glyphicon-thumbs-up"
          ng-click="incrementUpvotes(course)"></span>
        {{course.upvotes}}
        <span style="font-size:20px; margin-left:10px;">
          <a ng-show="course.link" href="{{course.link}}">
            {{course.title}}
          </a>
          <span ng-hide="course.link">
            {{course.title}}
          </span>
	  <span>
		<a href = "#/courses/{{course._id}}">Tasks</a>
	 </span>	
        </span>
      </div>

      <form ng-submit="addCourse()"
        style="margin-top:30px;">
        <h3>Add a new Course</h3>

        <div class="form-group">
          <input type="text"
            class="form-control"
            placeholder="Title"
            ng-model="title"></input>
        </div>
        <div class="form-group">
          <input type="text"
          class="form-control"
          placeholder="Link"
          ng-model="link"></input>
        </div>
        <button type="submit" class="btn btn-primary">Post</button>
      </form>

</script>  
<script type="text/ng-template" id="/courses.html">
  <div class="page-header">
    <h3>
      <a ng-show="course.link" href="{{course.link}}">
        {{course.title}}
      </a>
      <span ng-hide="course.link">
        {{course.title}}
      </span>
    </h3>
  </div>

 <div ng-repeat="courseTask in course.courseTasks | orderBy:'-upvotes'">
    <span class="glyphicon glyphicon-thumbs-up"
      ng-click="incrementUpvotes(courseTask)"></span>
    {{courseTask.upvotes}} - by {{courseTask.author}}
    <span style="font-size:20px; margin-left:10px;">
      {{courseTask.body}} - Due {{courseTask.dueDate}}
    </span>
  </div>
        <form ng-submit="addCourseTask()"
         style="margin-top:30px;">
         <h3>Add a new Task</h3>

         <div class="form-group">
                <input type="text"
                 class="form-control"
                 placeholder="Task"
                 ng-model="body"></input>
               <input type="date"
                 class="form-control"
                 placeholder="Date"
                 ng-model="dueDate"></input>
	 </div>
		
         <button type="submit" class="btn btn-primary">Post</button>
         </form>

  <div ng-repeat="comment in course.comments | orderBy:'-upvotes'">
    <span class="glyphicon glyphicon-thumbs-up"
      ng-click="incrementUpvotes(comment)"></span>
    {{comment.upvotes}} - by {{comment.author}}
    <span style="font-size:20px; margin-left:10px;">
      {{comment.body}}
    </span>
  </div>
	<form ng-submit="addComment()"
   	 style="margin-top:30px;">
   	 <h3>Add a new comment</h3>

   	 <div class="form-group">
     	 	<input type="text"
     		 class="form-control"
     		 placeholder="Comment"
     		 ng-model="body"></input>
    		</div>
   	 <button type="submit" class="btn btn-primary">Post</button>
 	 </form>	
	
</script>

</body>
</html>
